(function(){var $;(function(a,b,c){function j(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function i(a,b,c){c&&!c.parentNode&&i(a,c),a.insertBefore(b,c||null);return a}function h(a,b,c,d){var e=["opacity",b,~~(a*100),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";l[e]||(n.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),l[e]=1);return e}function g(a,b){var d=a.style,e,f;if(d[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<k.length;f++){e=k[f]+b;if(d[e]!==c)return e}}function f(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function e(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function d(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var k=["webkit","Moz","ms","O"],l={},m,n=function(){var a=j("style");i(b.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),o=function r(b){if(!this.spin)return new r(b);this.opts=e(b||{},r.defaults,p)},p=o.defaults={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25,fps:20},q=o.prototype={spin:function(a){this.stop();var b=this,c=b.el=f(j(),{position:"relative"}),e,g;a&&(g=d(i(a,c,a.firstChild)),e=d(c),f(c,{left:(a.offsetWidth>>1)-e.x+g.x+"px",top:(a.offsetHeight>>1)-e.y+g.y+"px"})),c.setAttribute("aria-role","progressbar"),b.lines(c,b.opts);if(!m){var h=b.opts,k=0,l=h.fps,n=l/h.speed,o=(1-h.opacity)/(n*h.trail/100),p=n/h.lines;(function q(){k++;for(var d=h.lines;d;d--){var e=Math.max(1-(k+d*p)%n*o,h.opacity);b.opacity(c,h.lines-d,e,h)}b.timeout=b.el&&setTimeout(q,~~(1e3/l))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c);return this}};q.lines=function(a,b){function c(a,c){return f(j(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*d)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}var d=0,e;for(;d<b.lines;d++)e=f(j(),{position:"absolute",top:1+~(b.width/2)+"px",transform:"translate3d(0,0,0)",opacity:b.opacity,animation:m&&h(b.opacity,b.trail,d,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&i(e,f(c("#000","0 0 4px #000"),{top:"2px"})),i(a,i(e,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},q.opacity=function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)},function(){var a=f(j("group"),{behavior:"url(#default#VML)"}),b;if(!g(a,"transform")&&a.adj){for(b=4;b--;)n.addRule(["group","roundrect","fill","stroke"][b],"behavior:url(#default#VML)");q.lines=function(a,b){function d(){return f(j("group",{coordsize:g+" "+g,coordorigin:-e+" "+ -e}),{width:g,height:g})}function c(a,c,g){i(h,i(f(d(),{rotation:360/b.lines*a+"deg",left:~~c}),i(f(j("roundrect",{arcsize:1}),{width:e,height:b.width,left:b.radius,top:-b.width>>1,filter:g}),j("fill",{color:b.color,opacity:b.opacity}),j("stroke",{opacity:0}))))}var e=b.length+b.width,g=2*e,h=d(),k=~(b.length+b.radius+b.width)+"px",l;if(b.shadow)for(l=1;l<=b.lines;l++)c(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=b.lines;l++)c(l);return i(f(a,{margin:k+" 0 0 "+k,zoom:1}),h)},q.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}else m=g(a,"animation")}(),a.Spinner=o})(window,document);var Edys_gallery_init={settings:{jquery_atleast_version:"1.5",jquery_url:"ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js",google_api_url:"http://www.google.com/jsapi",gallery_elements:".edys-gallery",autorun_init:!0,autorun_gallery:!0,init_complete:null},preopened_image:null,pre_spinner:null,pre_spinner_el:null,templinks:null,run:function(){var a=this;this._set_temp_link_clicks(),typeof window.edys_gallery_options!="undefined"?(typeof window.edys_gallery_options.autorun_init!="undefined"&&(this.settings.autorun_init=window.edys_gallery_options.autorun_init),typeof window.edys_gallery_options.autorun_gallery!="undefined"&&(this.settings.autorun_gallery=window.edys_gallery_options.autorun_search)):window.edys_gallery_options={},this.settings.autorun_init&&typeof window.edys_gallery_options.loaded=="undefined"&&(window.edys_gallery_options.loaded=!0,this.get_jquery(function(){a.add_spinner_fn(),a.handeAllLoaded()}))},_handle_temp_link_click:function(a){this.preopened_image=a;if(this.pre_spinner_el==null){var b=document.createElement("div");b.className="edys-gallery-loading-wrap",b.style.position="fixed",b.style.left="50%",b.style.top="50%",document.body.appendChild(b),this.pre_spinner_el=b,this.pre_spinner=(new Spinner({color:"#ffffff"})).spin(b)}},_set_temp_link_clicks:function(){var a=this._get_links(),b=this;this.templinks=a;for(var c=0,d=a.length;c<d;c++)(function(c){a[c].link.onclick=function(d){d?d.preventDefault():event.returnValue=!1,b._handle_temp_link_click.call(b,a[c]);return!1}})(c)},_remove_temp_link_clicks:function(){if(this.templinks!=null)for(var a=0,b=this.templinks.length;a<b;a++)this.templinks[a].link.onclick=function(){}},_get_elements_by_class:function(a){if(document.getElementsByClassName)return document.getElementsByClassName(a);var b=document.getElementsByTagName("*"),c=[];for(var d=0,e=b.length;d<e;d++)b[d].className==a&&c.push(b[d]);return c},_get_links:function(){var a=this.settings.gallery_elements.replace(/^\./,""),b=this._get_elements_by_class(a),c=[],d;for(var e=0,f=b.length;e<f;e++){d=b[e].getElementsByTagName("a");for(var g=0,h=d.length;g<h;g++)c.push({link:d[g],gallery:b[e]})}return c},_remove_preload_spinner:function(){this.pre_spinner_el!=null&&(this.pre_spinner.stop(),this.pre_spinner_el.parentNode.removeChild(this.pre_spinner_el))},add_spinner_fn:function(){$.fn.spin=function(a){this.each(function(){var b=$(this),c=b.data();c.spinner&&(c.spinner.stop(),delete c.spinner),a!==!1&&(c.spinner=(new Spinner($.extend({color:b.css("color")},a))).spin(this))});return this}},handeAllLoaded:function(){$.extend(!0,this.settings,window.edys_gallery_options),apply_edys_gallery_module($),this.settings.autorun_gallery?$(document).ready($.proxy(function(){this._remove_preload_spinner(),this._remove_temp_link_clicks(),$(this.settings.gallery_elements).edys_gallery(this.settings),this.settings.init_complete?this.settings.init_complete($):$("body").trigger("Edys_gallery_init_complete",$),this.preopened_image!=null&&$(this.preopened_image.gallery).edys_gallery("get_object").show(this.preopened_image.link)},this)):(this._remove_preload_spinner(),this._remove_temp_link_clicks(),this.settings.init_complete?this.settings.init_complete($):$("body").trigger("Edys_gallery_init_complete",$))},load_script:function(a,b){(function(c,d){var e=c.createElement(d);typeof e.onreadystatechange=="undefined"&&(e.onload=b);var g=location.protocol!="file:"?location.protocol:"http:";e.src=g+"//"+a,e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&b()},(c.getElementsByTagName("head")[0]||c.documentElement).appendChild(e)})(document,"script")},get_jquery:function(a){var b=document.body.onload||function(){},c=this;if(window.jQuery===undefined)c.load_script(c.settings.jquery_url,function(){$=window.jQuery.noConflict(),a()});else if(window.jQuery.fn.jquery<c.settings.jquery_atleast_version){var d=window.jQuery,e=window.$!==undefined?window.$:null;c.load_script(c.settings.jquery_url,function(){$=window.jQuery.noConflict(),window.jQuery=d,e!=null&&(window.$=e),a()})}else $=window.jQuery,a()}},apply_edys_gallery_module=function($){function scroller(){function g(b){b.preventDefault(),a.fixed_stops&&a.start_x!==null&&a.end_x!==null&&a.scrollable_element!==null&&a.move_to_closest(),a.start_x=a.end_x=null}function f(b){b.preventDefault();if(a.fixed_stops&&a.start_x!==null&&a.end_x!==null&&a.scrollable_element!==null){a.move_to_closest();var c=Math.abs(a.start_x-a.end_x);c<=a.tap_treshold*a.fixed_stop_width&&a.tap()}a.start_x=a.end_x=null}function e(b){b.preventDefault();if(a.start_x!==null&&a.scrollable_element!==null){a.end_x=c(b);var d=a.x+(a.end_x-a.start_x);$.browser.webkit?a.scrollable_element.css("-webkit-transform","translate3d("+d+"px,0px,0px)"):a.scrollable_element.css({left:d+"px"})}}function d(b){b.preventDefault(),a.start_x=a.end_x=c(b),$.browser.webkit&&a.scrollable_element.css("-webkit-transition-duration","0s")}function c(a){return b(a.targetTouches)?a.targetTouches[0].pageX:a.pageX}function b(a){return typeof a!="undefined"}this.start_x=null,this.end_x=null,this.start_offset=null,this.scrollable_element=null,this.scroller_elemets=null,this.x=0,this.current_index=0,this.fixed_stops=!0,this.fixed_stop_width=0,this.max_stops=0,this.move_treshold=.01,this.is_touch="ontouchstart"in window,this.tap_treshold=0,this.tap=function(){},this.after_stop=function(a){};var a=this;this.bind_events=function(){this.is_touch?this.bind_touch_events():this.bind_click_events()},this.move_to_closest=function(){var a=this.start_x-this.end_x,b=Math.round(-1*this.x/this.fixed_stop_width),c=b,d=this.fixed_stop_width*b;a>this.move_treshold*this.fixed_stop_width&&b+1<=this.max_stops&&(c=b+1),-1*a>this.move_treshold*this.fixed_stop_width&&b-1>=0&&(c=b-1),d=Math.round(this.fixed_stop_width*c),this.current_index=c,this.x=-1*d,$.browser.webkit?(this.scrollable_element.css("-webkit-transition-duration","0.5s"),this.scrollable_element.css("-webkit-transform","translate3d("+ -1*d+"px,0px,0px)")):this.scrollable_element.stop().animate({left:-1*d},800),this.after_stop(c)},this.move_to=function(a){var b=this.fixed_stop_width*a;$.browser.webkit?(this.scrollable_element.css("-webkit-transition-duration","0.5s"),this.scrollable_element.css("-webkit-transform","translate3d("+ -1*b+"px,0px,0px)")):this.scrollable_element.stop().animate({left:-1*b},800),this.current_index=a,this.x=-1*b,this.after_stop(a)},this.next=function(){this.current_index+1<=this.max_stops&&this.move_to(this.current_index+1)},this.previous=function(){this.current_index-1>=0&&this.move_to(this.current_index-1)},this.center_to_index=function(a){var c;if(this.scrollable_element!==null){b(a)?(this.current_index=a,c=a):c=this.current_index;var d=-1*c*this.fixed_stop_width;$.browser.webkit?this.scrollable_element.css({"-webkit-transform":"translate3d("+d+"px,0px,0px)","-webkit-transition-duration":"0s"}):this.scrollable_element.stop().css("left",d+"px"),this.x=d}},this.bind_touch_events=function(){this.scroller_elemets!==null&&this.scroller_elemets.each(function(){this.removeEventListener("touchstart",d,!1),this.removeEventListener("touchmove",e,!1),this.removeEventListener("touchend",f,!1),this.removeEventListener("touchcancel",g,!1),this.addEventListener("touchstart",d,!1),this.addEventListener("touchmove",e,!1),this.addEventListener("touchend",f,!1),this.addEventListener("touchcancel",g,!1)})},this.bind_click_events=function(){this.scroller_elemets!==null&&(this.scroller_elemets.unbind("mousedown").unbind("mousemove").unbind("mouseup"),this.scroller_elemets.mousedown(d).mousemove(e).mouseup(f))}}var G=function(a,b){this.defaults={user_defined_templates:!1,gallery_template:null,gallery_touch_template:null,popup_template:'<div class="{popup_class}">\n                                    <div class="{overlay_class}"></div>\n                                    <div class="{buttons_class}"></div>\n                                    <div class="{bottom_buttons_class}">\n                                        <div class="{btn_wrap_class}"><div class="{left_class}"></div></div>\n                                        <div class="{btn_wrap_class} {btn_wrap_middle_class}"><div class="{close_class}"></div></div>\n                                        <div class="{btn_wrap_class}"><div class="{right_class}"></div></div>\n                                    </div>\n                                    <div class="{content_wrap_class}">\n                                       <div class="{onimage_nav}">\n                                           <div class="{onimage_nav_rev}"></div>\n                                           <div class="{onimage_nav_fw}"></div>\n                                       </div>\n                                       <div class="{image_wrap_class}"></div>\n                                       <div class="{title_class}"></div>\n                                    </div>\n                                </div>',loader_template:'<div class="{loader_wrap_class}">\n                                     <div class="{loader_class}">\n                                     </div>\n                                 </div>',classnames:{overlay:"edys-gallery-overlay",loading:"edys-gallery-loading",loading_wrap:"edys-gallery-loading-wrap",popup:"edys-gallery-popup",left_btn:"edys-gallery-left",right_btn:"edys-gallery-right",btn_wrap:"edys-gallery-btn-wrap",btn_wrap_middle:"edys-gallery-btn-wrap-middle",close_btn:"edys-gallery-close",additional_btns:"edys-gallery-btns",bottom_btns:"edys-gallery-bottom-btns",content_wrap:"edys-gallery-content-wrap",image_wrap:"edys-gallery-image-wrap",image_wrap_box:"edys-gallery-image-wrap-box",title:"edys-gallery-title",notitle:"edys-gallery-title-notitle",onimage_nav:"edys-gallery-onimage-nav",onimage_nav_rev:"edys-gallery-onimage-nav-rev",onimage_nav_fw:"edys-gallery-onimage-nav-fw"},system_classnames:{overlay:"edys-gal-gallery-overlay",loading:"edys-gal-gallery-loading",loading_wrap:"edys-gallery-loading-wrap",popup:"edys-gal-gallery-popup",left_btn:"edys-gal-gallery-left",right_btn:"edys-gal-gallery-right",btn_wrap:"edys-gal-gallery-btn-wrap",btn_wrap_middle:"edys-gal-gallery-btn-wrap-middle",close_btn:"edys-gal-gallery-close",additional_btns:"edys-gal-gallery-btns",bottom_btns:"edys-gal-gallery-bottom-btns",content_wrap:"edys-gal-gallery-content-wrap",image_wrap:"edys-gal-gallery-image-wrap",image_wrap_box:"edys-gal-gallery-image-wrap-box",title:"edys-gal-gallery-title",notitle:"edys-gal-gallery-title-notitle",onimage_nav:"edys-gal-gallery-onimage-nav",onimage_nav_rev:"edys-gal-gallery-onimage-nav-rev",onimage_nav_fw:"edys-gal-gallery-onimage-nav-fw"},spinner_options:{lines:10,length:8,width:6,radius:9,trail:57,speed:1.4},title_dissapear_time:3,title_dissapear_time_touch:3,touchscreen_class_suffix:"-touch",image_to_wiewport_max_ratio_x:.8,image_to_wiewport_max_ratio_y:.8,image_to_wiewport_max_ratio_touch_x:.8,image_to_wiewport_max_ratio_touch_y:.97,swipe_move_treshold:.1,tap_move_treshold:0,click_onimage_nav:!0,jumping_mode:"strict",mode:"auto",texts:{wait:"Wait"}},this.gallery_elements=a,this.is_touch=!1,this.overlay_el=null,this.popup_el=null,this.current_list=null,this.lists=[],this.current_index=null,this.pic_scroll=new scroller,this.oc_timer=null,this.init(b)};G.prototype={init:function(a){a&&$.extend(!0,this.defaults,a),this.set_touch_mode(),init_swipe(),init_delay_fix(),this.run()},run:function(){var a=this.defaults,b=this;if(a.jumping_mode=="strict")this.gallery_elements.each(function(){var a=$(this).find("a");b.set_link_clicks(a)});else{var c=$(this.gallery_elements).find("a");this.set_link_clicks(c)}this.gallery_elements.data("EdysGalleryObject",this)},set_touch_mode:function(){this.is_touch=this.defaults.mode=="auto"?isTouchDevice():this.defaults.mode=="touch"?!0:!1},set_link_clicks:function(links){var L=this.get_link_arr(links),me=this;this.lists.push(L);for(var i in L)with({n:i})L[i].el.click(function(a){a.preventDefault(),me.show_gallery(parseInt(n,10),L);return!1})},get_link_arr:function(a){var b=[];a.each(function(){var a=$(this);b.push({href:a.attr("href"),rel:isset(a.attr("rel"))&&a.attr("rel")!=""?a.attr("rel"):"&nbsp;",el:a})});return b},get_classes:function(a,b,c){var d=this.defaults.system_classnames,e=this.defaults.classnames,f=isset(b)||this.defaults.user_defined_templates!==!1?b:!1,g=isset(c)?c:!0,h=this.is_touch?this.defaults.touchscreen_class_suffix:"",i=g?".":"",j=i+d[a]+h;if(this.defaults.user_defined_templates!==!1)return i+e[a]+h;f&&(j+=" "+i+e[a]+h);return j},_get_img_list_index:function(a){var b=-1,c=null;for(var d in this.lists)for(var e in this.lists[d])this.lists[d][e].el.get(0)==a&&(b=e,c=this.lists[d]);return b>-1?{index:b,list:c}:null},show:function(a){var b=this._get_img_list_index(a);this.show_gallery(b.index,b.list)},show_gallery:function(a,b){this.current_list=b,this.current_index=a,this.popup_el===null&&(this.popup_el=this.popup_make(),this.is_touch?this.touch_set_next_prev_buttons():this.click_set_next_prev_buttons(),this.overlay_el=this.popup_el.find(this.get_classes("overlay")),this.is_touch||this.overlay_el.click($.proxy(function(){this.hide_gallery()},this))),$(document).unbind("keydown").keydown($.proxy(function(a){switch(a.which){case 39:this.next();break;case 37:this.previous();break;case 27:this.hide_gallery()}},this)),this.overlay_resize(),"onorientationchange"in window?(window.removeEventListener("orientationchange",$.proxy(this.resize_window_event,this),!1),window.addEventListener("orientationchange",$.proxy(this.resize_window_event,this),!1)):$(window).unbind("resize").resize($.proxy(function(){this.resize_window_function()},this)),this.overlay_el.show(),this.loading_show(),this.is_touch?this.initiate_touch_mode():this.initiate_click_mode()},hide_gallery:function(){this.current_list=null,this.current_index=null,$(this.get_classes("popup")+","+this.get_classes("overlay")).hide(),$(window).unbind("resize"),this.loading_hide(),$(document).unbind("keydown")},initiate_touch_mode:function(){var a=this.current_index,b=this.current_list,c=this.popup_el.find(this.get_classes("bottom_btns"));this.loading_hide(),this.popup_el.find(this.get_classes("title")).remove(),this.align_touch_popup(),this.popup_el.show(),this.make_all_img_element(a,b,$.proxy(function(){if(this.defaults.title_dissapear_time_touch>-1){var d=this.popup_el.find(this.get_classes("title")),e=c.add(d);e.stop(!0,!0).show().css("opacity",1).delay(this.defaults.title_dissapear_time_touch*1e3).fadeTo(400,0),this.pic_scroll.tap=$.proxy(function(){e.stop(!0,!0).show().css("opacity",1),e.stop(!0,!0).delay(this.defaults.title_dissapear_time_touch*1e3).fadeTo(400,0)},this)}this.pic_scroll.scrollable_element=this.popup_el.find(this.get_classes("image_wrap")),this.pic_scroll.scroller_elemets=this.popup_el.add(this.overlay_el).add(this.popup_el.find(this.get_classes("image_wrap")+" img")).add(this.popup_el.find(this.get_classes("title"))).add(this.popup_el.find(this.get_classes("image_wrap"))).add(this.popup_el.find(this.get_classes("loading"))).add(this.popup_el.find(this.get_classes("loading_wrap"))).add(this.popup_el.find(this.get_classes("btn_wrap"))).add(this.popup_el.find(this.get_classes("btn_wrap_middle"))).add(this.popup_el.find(this.get_classes("additional_btns"))).add(this.popup_el.find(this.get_classes("edys-gallery-bottom-btns"))).add(this.popup_el.find(this.get_classes("content_wrap"))).add(this.popup_el.find(this.get_classes("image_wrap_box"))),this.pic_scroll.fixed_stop_width=viewport.width(),this.pic_scroll.max_stops=b.length-1,this.pic_scroll.move_treshold=this.defaults.swipe_move_treshold,this.pic_scroll.tap_treshold=this.defaults.tap_move_treshold,this.pic_scroll.bind_events(),this.pic_scroll.center_to_index(a),this.pic_scroll.after_stop=$.proxy(function(a){this.current_index=a,this.show_hide_next_prev()},this),this.show_hide_next_prev()},this))},initiate_click_mode:function(){var a=this.current_index,b=this.current_list,c=$(this.get_classes("title"));this.preload_image(b[a].href,$.proxy(function(d){this.popup_el.find(this.get_classes("image_wrap")).html(d),this.popup_el.css("visibility","hidden").show(),c.css({visibility:"visible",display:"inline"}),b[a].rel!="&nbsp;"&&b[a].rel!=""?(c.show().html(b[a].rel),this.defaults.title_dissapear_time>-1&&(c.stop(!0,!0).delay(this.defaults.title_dissapear_time*1e3).fadeOut(),$(this.get_classes("content_wrap")).unbind("mousemove").bind("mousemove",$.proxy(function(){this.current_list[this.current_index].rel!="&nbsp;"&&(c.stop(!0,!0).show().css("opacity",1),$(this).unbind("mouseleave").one("mouseleave",function(){c.stop(!0,!0).delay(this.defaults.title_dissapear_time*1e3).fadeOut()}))},this)))):c.html("").css("visibility","hidden").hide(),this.set_popup_size_pos(),this.overlay_resize(),this.popup_el.css("visibility","visible"),this.show_hide_next_prev(),this.loading_hide()},this))},resize_window_event:function(){this.oc_timer!==null&&clearTimeout(this.oc_timer),this.oc_timer=setTimeout($.proxy(function(){this.resize_window_function()},this),500)},resize_window_function:function(){var a=this.popup_el.find(this.get_classes("image_wrap")+" img"),b=this.popup_el.find(this.get_classes("image_wrap_box")),c=this;this.overlay_resize();if(a.length>0){if(this.is_touch)this.align_touch_popup(),b.width(viewport.width());else{this.set_popup_size_pos();var d=this.get_img_size(a);$(this.get_classes("content_wrap")).width(d.w).height(d.h)}a.each(function(){$(this).css({visibility:"hidden",width:"auto",height:"auto"}).show();var a=c.get_img_size($(this));$(this).height(a.h).width(a.w).css("visibility","visible").show()})}this.pic_scroll.fixed_stop_width=viewport.width(),this.pic_scroll.center_to_index()},overlay_resize:function(){var a=this.overlay_el;a.width(1).height(1);var b=$(document).width(),c=$(document).height();a.width(b).height(c)},popup_make:function(){var a=this.defaults.user_defined_templates===!1?format_template(this.defaults.popup_template,{popup_class:this.get_classes("popup",!0,!1),close_class:this.get_classes("close_btn",!0,!1),left_class:this.get_classes("left_btn",!0,!1),right_class:this.get_classes("right_btn",!0,!1),btn_wrap_class:this.get_classes("btn_wrap",!0,!1),btn_wrap_middle_class:this.get_classes("btn_wrap_middle",!0,!1),buttons_class:this.get_classes("additional_btns",!0,!1),content_wrap_class:this.get_classes("content_wrap",!0,!1),image_wrap_class:this.get_classes("image_wrap",!0,!1),title_class:this.get_classes("title",!0,!1),bottom_buttons_class:this.get_classes("bottom_btns",!0,!1),clickable_bg_class:this.get_classes("popup_click_bg",!0,!1),overlay_class:this.get_classes("overlay",!0,!1),onimage_nav:this.get_classes("onimage_nav",!0,!1),onimage_nav_rev:this.get_classes("onimage_nav_rev",!0,!1),onimage_nav_fw:this.get_classes("onimage_nav_fw",!0,!1)}):this.is_touch?this.defaults.gallery_touch_template:this.defaults.gallery_template,b=$(a);b.hide();var c=b.find(this.get_classes("close_btn"));isTouchDevice()?(b.find(this.get_classes("onimage_nav")).remove(),c.get(0).addEventListener("touchend",$.proxy(function(){this.hide_gallery()},this),!1)):(this.defaults.click_onimage_nav||b.find(this.get_classes("onimage_nav")).remove(),c.click($.proxy(function(){this.hide_gallery()},this))),$("body").prepend(b);return b},make_all_img_element:function(a,b,c){var d=this.popup_el.find(this.get_classes("image_wrap")),e=b.length-1,f=$("<div />").addClass(this.get_classes("image_wrap_box",!0,!1)).width(viewport.width()).html(this.get_loading_html()).css({"min-height":"10px"}),g=f.clone(),h=$("<div/>").addClass(this.get_classes("title",!0,!1)).html(b[a].rel),i=this;b[a].rel=="&nbsp;"&&h.addClass(this.get_classes("notitle",!0,!1)),g.append(h).append("<br/>"),d.width((e+1)*viewport.width()).html(g),d.find(this.get_classes("loading")).spin(this.defaults.spinner_options),this.preload_image(b[a].href,$.proxy(function(a){g.find(this.get_classes("loading_wrap")).remove(),g.append(a);var b=this.get_img_size(a);a.height(b.h).width(b.w).show()},this));if(a<e)for(var j=a+1;j<=e;j++)(function(a){var c=f.clone(),e=$("<div/>").addClass(i.get_classes("title",!0,!1)).html(b[a].rel);b[a].rel=="&nbsp;"&&e.addClass(i.get_classes("notitle",!0,!1)),c.append(e).append("<br/>"),d.append(c),c.find(i.get_classes("loading")).spin(i.defaults.spinner_options),i.preload_image(b[a].href,function(a){c.find(i.get_classes("loading_wrap")).remove(),c.append(a);var b=i.get_img_size(a);a.height(b.h).width(b.w).show()})})(j);if(a>0)for(var k=a-1;k>=0;k--)(function(a){var c=f.clone(),e=$("<div/>").addClass(i.get_classes("title",!0,!1)).html(b[a].rel);b[a].rel=="&nbsp;"&&e.addClass(i.get_classes("notitle",!0,!1)),c.append(e).append("<br/>"),d.prepend(c),c.find(i.get_classes("loading")).spin(i.defaults.spinner_options),i.preload_image(b[a].href,function(a){c.find(i.get_classes("loading_wrap")).remove(),c.append(a);var b=i.get_img_size(a);a.height(b.h).width(b.w).show()})})(k);c()},touch_set_next_prev_buttons:function(){var a=this.current_list,b=this.current_index,c=this.popup_el,d=c.find(this.get_classes("right_btn")),e=c.find(this.get_classes("left_btn")),f=c.find(this.get_classes("image_wrap"));this.show_hide_next_prev(),isTouchDevice()?(d.get(0).addEventListener("touchstart",$.proxy(function(){this.next()},this),!1),e.get(0).addEventListener("touchstart",$.proxy(function(){this.previous()},this),!1)):(d.click($.proxy(function(a){this.next()},this)),e.click($.proxy(function(a){this.previous()},this)))},align_touch_popup:function(){var a=this.popup_el.find(this.get_classes("bottom_btns")),b=this.popup_el.find(this.get_classes("image_wrap"));this.popup_el.width(viewport.width()).height(viewport.height()).css({"padding-top":$(document).scrollTop()+"px","padding-left":$(document).scrollLeft()+"px","padding-right":$(document).width()-viewport.width()-$(document).scrollLeft()+"px","padding-bottom":$(document).height()-viewport.height()-$(document).scrollTop()+"px"}),a.css({bottom:$(document).height()-viewport.height()-$(document).scrollTop()+"px",left:viewport.width()/2+$(document).scrollLeft()+"px"})},set_popup_size_pos:function(){var a=this.popup_el,b=a.find(this.get_classes("image_wrap")+" img"),c=a.find(this.get_classes("content_wrap")),d=a.find(this.get_classes("bottom_btns"));a.height(1);var e=viewport.height()+$(document).scrollTop();a.height($(document).height()),a.width($(document).width()),this.set_img_size(b);var f=viewport.width(),g=viewport.height();c.css({height:"auto",width:"auto"});var h=b.outerWidth(),i=b.outerHeight(),j=f/2-h/2+$(document).scrollLeft(),k=(g-d.outerHeight(!0))/2-i/2+$(document).scrollTop();c.css({left:j+"px",top:k+"px",height:a.find(this.get_classes("image_wrap")+" img").height()+"px"}),a.height($(document).height()),d.css({bottom:$(document).height()-viewport.height()-$(document).scrollTop()+"px",left:viewport.width()/2+$(document).scrollLeft()+"px"})},click_set_next_prev_buttons:function(){var a=this.current_list,b=this.current_index,c=this.popup_el,d=c.find(this.get_classes("right_btn")),e=c.find(this.get_classes("left_btn")),f=c.find(this.get_classes("image_wrap"));this.show_hide_next_prev(),d.unbind("click").click($.proxy(function(a){this.next()},this)),e.unbind("click").click($.proxy(function(a){this.previous()},this));if(this.defaults.click_onimage_nav){var g=c.find(this.get_classes("onimage_nav_fw")),h=c.find(this.get_classes("onimage_nav_rev"));g.unbind("click").click($.proxy(function(a){this.next()},this)).hover(function(){d.hasClass("disabled")||d.parent().addClass("over")},function(){d.parent().removeClass("over")}),h.unbind("click").click($.proxy(function(a){this.previous()},this)).hover(function(){e.hasClass("disabled")||e.parent().addClass("over")},function(){e.parent().removeClass("over")})}isTouchDevice()&&$(f).swipe({swipeLeft:$.proxy(function(){this.next()},this),swipeRight:$.proxy(function(){this.previous()},this)})},show_hide_next_prev:function(){var a=this.current_list,b=this.current_index,c=this.popup_el,d=c.find(this.get_classes("right_btn")),e=c.find(this.get_classes("left_btn")),f=b+1<a.length,g=b-1>=0;f?d.removeClass("disabled"):d.addClass("disabled"),g?e.removeClass("disabled"):e.addClass("disabled")},change_to_image:function(a,b){var c=this.popup_el,d=c.find(this.get_classes("content_wrap")),e=c.find(this.get_classes("image_wrap")),f=c.find(this.get_classes("bottom_btns")),g=this;this.loading_show(),$(this.get_classes("content_wrap")).unbind("mouseleave"),this.preload_image(b[a].href,$.proxy(function(e){var h=$(this.get_classes("image_wrap")+" img:not(.edys_image_ending_anim)");$(this.get_classes("title")).css("visibility","visible"),$(this.get_classes("image_wrap")+" img.edys_image_ending_anim").stop(!0,!0).remove(),h.addClass("edys_image_ending_anim"),d.stop(!0,!0),$(h).stop(!0,!0);var i=h.width(),j=h.height();f.css({bottom:$(document).height()-viewport.height()-$(document).scrollTop()+"px",left:viewport.width()/2+$(document).scrollLeft()+"px"}),e.css({position:"absolute",visibility:"hidden"}).show(),c.find(this.get_classes("image_wrap")).prepend(e),b[a].rel!="&nbsp;"?($(this.get_classes("title")).stop(!0,!0).show().css("opacity",1).html(b[a].rel),this.defaults.title_dissapear_time>-1&&$(this.get_classes("title")).stop(!0,!0).delay(this.defaults.title_dissapear_time*1e3).fadeOut()):($(this.get_classes("title")).html("").css("visibility","hidden"),$(this.get_classes("title")).hide());var k=this.get_img_size(e),l=k.w,m=k.h,n=viewport.width(),o=viewport.height(),p=n/2-d.outerWidth()/2-(l-i)/2+$(document).scrollLeft(),q=(o-f.outerHeight(!0))/2-d.outerHeight(!0)/2-(m-j)/2+$(document).scrollTop();d.animate({left:p+"px",top:q+"px",width:l+"px",height:m+"px"},300),$(h).animate({width:l+"px",height:m+"px"},300),$(e).animate({width:l+"px",height:m+"px"},300,function(){e.css({position:"absolute",visibility:"visible",top:0,left:0}).fadeIn(300,$.proxy(function(){h.remove(),e.css({position:"static"}),g.loading_hide()},g))})},this))},loading_show:function(){var a=viewport.width(),b=viewport.height(),c=$(this.get_loading_html()).css("visibility","hidden");$(this.get_classes("loading_wrap")).remove(),$("body").prepend(c);var d=c.outerHeight(),e=c.outerWidth();c.css({top:b/2-d/2+$(document).scrollTop()+"px",left:a/2-e/2+$(document).scrollLeft()+"px",visibility:"visible"}),c.spin(this.defaults.spinner_options)},get_loading_html:function(){var a=format_template(this.defaults.loader_template,{loader_class:this.get_classes("loading",!0,!1),loader_wrap_class:this.get_classes("loading_wrap",!0,!1)});return a},loading_hide:function(){/chrome/.test(navigator.userAgent.toLowerCase())?setTimeout($.proxy(function(){$(this.get_classes("loading_wrap")).spin(!1).remove()},this),200):$(this.get_classes("loading_wrap")).spin(!1).remove()},set_img_size:function(a){var b=this.popup_el,c=this.defaults,d=a.width(),e=a.height(),f=this.is_touch?c.image_to_wiewport_max_ratio_touch_x:c.image_to_wiewport_max_ratio_x,g=this.is_touch?c.image_to_wiewport_max_ratio_touch_y:c.image_to_wiewport_max_ratio_y;a.height(1).width(1);var h=viewport.width(),i=viewport.height(),j=g*i,k=d/(e/j);k>h*f&&(k=h*f,j=e/(d/k)),e>j?a.add(this.get_classes("content_wrap")).height(j).width(k):a.height(e).width(d)},get_img_size:function(a){var b=this.popup_el,c=this.defaults,d=a.width(),e=a.height(),f=this.is_touch?c.image_to_wiewport_max_ratio_touch_x:c.image_to_wiewport_max_ratio_x,g=this.is_touch?c.image_to_wiewport_max_ratio_touch_y:c.image_to_wiewport_max_ratio_y,h,i;a.height(1).width(1).show();var j=viewport.width(),k=viewport.height(),l=g*k,m=d/(e/l);m>j*f&&(m=j*f,l=e/(d/m)),e>l?(h=l,i=m):(h=e,i=d),a.height(e).width(d).hide();return{h:h,w:d/(e/h),vw:j,vh:k}},next:function(){this.current_index+1<this.current_list.length&&(this.current_index++,this.is_touch?this.pic_scroll.next():this.change_to_image(this.current_index,this.current_list),this.show_hide_next_prev())},previous:function(){this.current_index-1>=0&&(this.current_index--,this.is_touch?this.pic_scroll.previous():this.change_to_image(this.current_index,this.current_list),this.show_hide_next_prev())},preload_image:function(a,b){var c=$("<img />").load(function(){b($(this))}).attr("src",a)}};var load_script=function(a,b){(function(c,d){var e=c.createElement(d);e.onload=b;var g=location.protocol!="file:"?location.protocol:"http:";e.src=g+"//"+a,e.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&b()},(c.getElementsByTagName("head")[0]||c.documentElement).appendChild(e)})(document,"script")},isTouchDevice=function(){return"ontouchstart"in window},format_template=function(a,b){var c=a;for(var d in b){var e=new RegExp("{"+d+"}","gi");c=c.replace(e,b[d])}return c},viewport={width:function(){return typeof window.innerWidth!="undefined"?window.innerWidth:$(window).width()},height:function(){return typeof window.innerHeight!="undefined"?window.innerHeight:$(window).height()}},isset=function(a){return typeof a!="undefined"},init_delay_fix=function(){$.fn.delay=function(a,b){$.fx.step.delay=function(){};return this.animate({delay:1},a,b)}},init_swipe=function(){$.fn.swipe=function(a
){var b={threshold:{x:30,y:400},swipeLeft:function(){},swipeRight:function(){}},c=$.extend(b,a);if(!this)return!1;return this.each(function(){function g(a){}function f(b){a.x=b.targetTouches[0].pageX,a.y=b.targetTouches[0].pageY,c.x=a.x,c.y=a.y}function e(d){var e=a.y-c.y;e<b.threshold.y&&e>b.threshold.y*-1&&(changeX=a.x-c.x,changeX>b.threshold.x&&b.swipeLeft(),changeX<b.threshold.x*-1&&b.swipeRight())}function d(a){a.preventDefault(),c.x=a.targetTouches[0].pageX,c.y=a.targetTouches[0].pageY}var a={x:0,y:0},c={x:0,y:0};this.addEventListener("touchstart",f,!1),this.addEventListener("touchmove",d,!1),this.addEventListener("touchend",e,!1),this.addEventListener("touchcancel",g,!1)})}},methods={init:function(a){new G($(this),a);return this},get_object:function(){return this.eq(0).data("EdysGalleryObject")}};$.fn.edys_gallery=function(a){if(methods[a])return methods[a].apply(this,Array.prototype.slice.call(arguments,1));if(typeof a=="object"||!a)return methods.init.apply(this,arguments);$.error("Method "+a+" does not exist on jQuery.edys_gallery");return null}};window.apply_edys_gallery_module=apply_edys_gallery_module,Edys_gallery_init.run()})()